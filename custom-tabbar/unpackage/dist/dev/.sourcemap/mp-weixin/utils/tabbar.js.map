{"version":3,"file":"tabbar.js","sources":["utils/tabbar.js"],"sourcesContent":["/**\r\n * 自定义TabBar工具类\r\n * 提供兼容uni-app原生TabBar API的方法\r\n */\r\n\r\nclass CustomTabBar {\r\n\tconstructor() {\r\n\t\tthis.tabBarInstance = null;\r\n\t\tthis.currentSelected = 0;\r\n\t}\r\n\t\r\n\t// 设置TabBar实例引用\r\n\tsetInstance(instance) {\r\n\t\tthis.tabBarInstance = instance;\r\n\t}\r\n\t\r\n\t// 获取当前选中的TabBar项\r\n\tgetCurrentSelected() {\r\n\t\treturn this.currentSelected;\r\n\t}\r\n\t\r\n\t// 设置当前选中项\r\n\tsetCurrentSelected(index) {\r\n\t\tthis.currentSelected = index;\r\n\t}\r\n\t\r\n\t// 设置TabBar某一项的徽标\r\n\tsetTabBarBadge(options) {\r\n\t\treturn new Promise((resolve, reject) => {\r\n\t\t\ttry {\r\n\t\t\t\tif (!this.tabBarInstance) {\r\n\t\t\t\t\tthrow new Error('TabBar实例未初始化');\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tconst { index, text } = options;\r\n\t\t\t\tthis.tabBarInstance.setTabBarBadge(index, text);\r\n\t\t\t\t\r\n\t\t\t\tresolve({\r\n\t\t\t\t\terrMsg: 'setTabBarBadge:ok'\r\n\t\t\t\t});\r\n\t\t\t} catch (error) {\r\n\t\t\t\treject({\r\n\t\t\t\t\terrMsg: `setTabBarBadge:fail ${error.message}`\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\t\r\n\t// 移除TabBar某一项的徽标\r\n\tremoveTabBarBadge(options) {\r\n\t\treturn new Promise((resolve, reject) => {\r\n\t\t\ttry {\r\n\t\t\t\tif (!this.tabBarInstance) {\r\n\t\t\t\t\tthrow new Error('TabBar实例未初始化');\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tconst { index } = options;\r\n\t\t\t\tthis.tabBarInstance.removeTabBarBadge(index);\r\n\t\t\t\t\r\n\t\t\t\tresolve({\r\n\t\t\t\t\terrMsg: 'removeTabBarBadge:ok'\r\n\t\t\t\t});\r\n\t\t\t} catch (error) {\r\n\t\t\t\treject({\r\n\t\t\t\t\terrMsg: `removeTabBarBadge:fail ${error.message}`\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\t\r\n\t// 显示TabBar某一项的右上角红点\r\n\tshowTabBarRedDot(options) {\r\n\t\treturn new Promise((resolve, reject) => {\r\n\t\t\ttry {\r\n\t\t\t\tif (!this.tabBarInstance) {\r\n\t\t\t\t\tthrow new Error('TabBar实例未初始化');\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tconst { index } = options;\r\n\t\t\t\tthis.tabBarInstance.showTabBarRedDot(index);\r\n\t\t\t\t\r\n\t\t\t\tresolve({\r\n\t\t\t\t\terrMsg: 'showTabBarRedDot:ok'\r\n\t\t\t\t});\r\n\t\t\t} catch (error) {\r\n\t\t\t\treject({\r\n\t\t\t\t\terrMsg: `showTabBarRedDot:fail ${error.message}`\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\t\r\n\t// 隐藏TabBar某一项的右上角红点\r\n\thideTabBarRedDot(options) {\r\n\t\treturn new Promise((resolve, reject) => {\r\n\t\t\ttry {\r\n\t\t\t\tif (!this.tabBarInstance) {\r\n\t\t\t\t\tthrow new Error('TabBar实例未初始化');\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tconst { index } = options;\r\n\t\t\t\tthis.tabBarInstance.hideTabBarRedDot(index);\r\n\t\t\t\t\r\n\t\t\t\tresolve({\r\n\t\t\t\t\terrMsg: 'hideTabBarRedDot:ok'\r\n\t\t\t\t});\r\n\t\t\t} catch (error) {\r\n\t\t\t\treject({\r\n\t\t\t\t\terrMsg: `hideTabBarRedDot:fail ${error.message}`\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\t\r\n\t// 动态设置TabBar的整体样式\r\n\tsetTabBarStyle(options) {\r\n\t\treturn new Promise((resolve, reject) => {\r\n\t\t\ttry {\r\n\t\t\t\t// 这里可以扩展更多样式设置功能\r\n\t\t\t\tconsole.log('setTabBarStyle:', options);\r\n\t\t\t\t\r\n\t\t\t\tresolve({\r\n\t\t\t\t\terrMsg: 'setTabBarStyle:ok'\r\n\t\t\t\t});\r\n\t\t\t} catch (error) {\r\n\t\t\t\treject({\r\n\t\t\t\t\terrMsg: `setTabBarStyle:fail ${error.message}`\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\t\r\n\t// 动态设置TabBar某一项的内容\r\n\tsetTabBarItem(options) {\r\n\t\treturn new Promise((resolve, reject) => {\r\n\t\t\ttry {\r\n\t\t\t\tif (!this.tabBarInstance) {\r\n\t\t\t\t\tthrow new Error('TabBar实例未初始化');\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tconst { index, text, iconPath, selectedIconPath } = options;\r\n\t\t\t\t\r\n\t\t\t\tif (this.tabBarInstance.tabList && this.tabBarInstance.tabList[index]) {\r\n\t\t\t\t\tif (text !== undefined) {\r\n\t\t\t\t\t\tthis.tabBarInstance.tabList[index].text = text;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (iconPath !== undefined) {\r\n\t\t\t\t\t\tthis.tabBarInstance.tabList[index].iconPath = iconPath;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (selectedIconPath !== undefined) {\r\n\t\t\t\t\t\tthis.tabBarInstance.tabList[index].selectedIconPath = selectedIconPath;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tresolve({\r\n\t\t\t\t\terrMsg: 'setTabBarItem:ok'\r\n\t\t\t\t});\r\n\t\t\t} catch (error) {\r\n\t\t\t\treject({\r\n\t\t\t\t\terrMsg: `setTabBarItem:fail ${error.message}`\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\t\r\n\t// 显示TabBar\r\n\tshowTabBar(options = {}) {\r\n\t\treturn new Promise((resolve, reject) => {\r\n\t\t\ttry {\r\n\t\t\t\t// 实现显示TabBar的逻辑\r\n\t\t\t\tif (this.tabBarInstance && this.tabBarInstance.$el) {\r\n\t\t\t\t\tthis.tabBarInstance.$el.style.display = 'flex';\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tresolve({\r\n\t\t\t\t\terrMsg: 'showTabBar:ok'\r\n\t\t\t\t});\r\n\t\t\t} catch (error) {\r\n\t\t\t\treject({\r\n\t\t\t\t\terrMsg: `showTabBar:fail ${error.message}`\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\t\r\n\t// 隐藏TabBar\r\n\thideTabBar(options = {}) {\r\n\t\treturn new Promise((resolve, reject) => {\r\n\t\t\ttry {\r\n\t\t\t\t// 实现隐藏TabBar的逻辑\r\n\t\t\t\tif (this.tabBarInstance && this.tabBarInstance.$el) {\r\n\t\t\t\t\tthis.tabBarInstance.$el.style.display = 'none';\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tresolve({\r\n\t\t\t\t\terrMsg: 'hideTabBar:ok'\r\n\t\t\t\t});\r\n\t\t\t} catch (error) {\r\n\t\t\t\treject({\r\n\t\t\t\t\terrMsg: `hideTabBar:fail ${error.message}`\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n}\r\n\r\n// 创建单例实例\r\nconst customTabBar = new CustomTabBar();\r\n\r\n// 扩展uni对象，添加自定义TabBar API\r\nif (typeof uni !== 'undefined') {\r\n\t// 覆盖原生方法，使其使用自定义TabBar\r\n\tconst originalSetTabBarBadge = uni.setTabBarBadge;\r\n\tconst originalRemoveTabBarBadge = uni.removeTabBarBadge;\r\n\tconst originalShowTabBarRedDot = uni.showTabBarRedDot;\r\n\tconst originalHideTabBarRedDot = uni.hideTabBarRedDot;\r\n\tconst originalSetTabBarStyle = uni.setTabBarStyle;\r\n\tconst originalSetTabBarItem = uni.setTabBarItem;\r\n\tconst originalShowTabBar = uni.showTabBar;\r\n\tconst originalHideTabBar = uni.hideTabBar;\r\n\t\r\n\t// 重写API方法\r\n\tuni.setTabBarBadge = function(options) {\r\n\t\t// 如果有自定义TabBar实例，使用自定义方法\r\n\t\tif (customTabBar.tabBarInstance) {\r\n\t\t\treturn customTabBar.setTabBarBadge(options);\r\n\t\t}\r\n\t\t// 否则使用原生方法\r\n\t\treturn originalSetTabBarBadge.call(this, options);\r\n\t};\r\n\t\r\n\tuni.removeTabBarBadge = function(options) {\r\n\t\tif (customTabBar.tabBarInstance) {\r\n\t\t\treturn customTabBar.removeTabBarBadge(options);\r\n\t\t}\r\n\t\treturn originalRemoveTabBarBadge.call(this, options);\r\n\t};\r\n\t\r\n\tuni.showTabBarRedDot = function(options) {\r\n\t\tif (customTabBar.tabBarInstance) {\r\n\t\t\treturn customTabBar.showTabBarRedDot(options);\r\n\t\t}\r\n\t\treturn originalShowTabBarRedDot.call(this, options);\r\n\t};\r\n\t\r\n\tuni.hideTabBarRedDot = function(options) {\r\n\t\tif (customTabBar.tabBarInstance) {\r\n\t\t\treturn customTabBar.hideTabBarRedDot(options);\r\n\t\t}\r\n\t\treturn originalHideTabBarRedDot.call(this, options);\r\n\t};\r\n\t\r\n\tuni.setTabBarStyle = function(options) {\r\n\t\tif (customTabBar.tabBarInstance) {\r\n\t\t\treturn customTabBar.setTabBarStyle(options);\r\n\t\t}\r\n\t\treturn originalSetTabBarStyle.call(this, options);\r\n\t};\r\n\t\r\n\tuni.setTabBarItem = function(options) {\r\n\t\tif (customTabBar.tabBarInstance) {\r\n\t\t\treturn customTabBar.setTabBarItem(options);\r\n\t\t}\r\n\t\treturn originalSetTabBarItem.call(this, options);\r\n\t};\r\n\t\r\n\tuni.showTabBar = function(options) {\r\n\t\tif (customTabBar.tabBarInstance) {\r\n\t\t\treturn customTabBar.showTabBar(options);\r\n\t\t}\r\n\t\treturn originalShowTabBar.call(this, options);\r\n\t};\r\n\t\r\n\tuni.hideTabBar = function(options) {\r\n\t\tif (customTabBar.tabBarInstance) {\r\n\t\t\treturn customTabBar.hideTabBar(options);\r\n\t\t}\r\n\t\treturn originalHideTabBar.call(this, options);\r\n\t};\r\n}\r\n\r\nexport default customTabBar; "],"names":["uni"],"mappings":"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"}